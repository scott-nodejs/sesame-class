(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/updateAvatar"],{"1ff0":function(t,e,n){"use strict";var a=n("3950"),r=n.n(a);r.a},"31cb":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement;t._self._c},o=[]},3950:function(t,e,n){},"4d21":function(t,e,n){"use strict";(function(t){n("ab2f");a(n("66fd"));var e=a(n("6cc7"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},5794:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("f77f"),r=n("26cb"),o=n("9038");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={data:function(){return{defaultAvatarUrl:"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0",avatarUrl:"",nick_name:"",userImg:""}},onLoad:function(){this.userImg=this.userInfo.avatarUrl,this.nick_name=this.userInfo.nickName},computed:c({},(0,r.mapState)("user",["token","userInfo"])),methods:c(c({},(0,r.mapActions)("user",["login","logout"])),{},{onChooseAvatar:function(t){this.avatarUrl=t.detail.avatarUrl,console.log("e.detail",t.detail),console.log(this.avatarUrl),this.uploadFile()},inputWord:(0,a.throttle)((function(t){this.nick_name=t.detail.value,console.log("this.nick_name.length",this.nick_name.length)}),100),uploadFile:function(){var e=this;t.showLoading({title:"上传头像..."}),t.uploadFile({url:"https://yima.hazer.top/lazyer/uploadAvatar",filePath:this.avatarUrl,name:"file",header:{"content-type":"multipart/form-data",Authorization:this.token},success:function(n){t.hideLoading();var a=JSON.parse(n.data);console.log("obj",a),200==a.code?e.userImg=a.data.url:t.showToast({icon:"none",title:"图片太大，请重新选择！"})},fail:function(e){t.showToast({icon:"none",title:"上传失败"})}})},updateUser:function(){this.userInfo.avatarUrl=this.userImg,this.userInfo.nickName=this.nick_name.trim(),t.showLoading({title:"更新中"});var e={avatar:this.userImg,nickName:this.nick_name.trim()};(0,o.updateUserInfo)(e).then((function(e){t.hideLoading(),200==e.code?(console.log("修改成功"),t.navigateBack({delta:1})):console.log("修改失败")}))}})};e.default=l}).call(this,n("543d")["default"])},"6cc7":function(t,e,n){"use strict";n.r(e);var a=n("31cb"),r=n("857f");for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("1ff0");var i,c=n("f0c5"),u=Object(c["a"])(r["default"],a["b"],a["c"],!1,null,"06891964",null,!1,a["a"],i);e["default"]=u.exports},"857f":function(t,e,n){"use strict";n.r(e);var a=n("5794"),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a}},[["4d21","common/runtime","common/vendor"]]]);